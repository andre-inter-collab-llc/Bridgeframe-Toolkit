<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Google Forms Blueprint: Public Health Automation Clinic Intake Form</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="google-forms-automation-clinic-blueprint_files/libs/clipboard/clipboard.min.js"></script>
<script src="google-forms-automation-clinic-blueprint_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="google-forms-automation-clinic-blueprint_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="google-forms-automation-clinic-blueprint_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="google-forms-automation-clinic-blueprint_files/libs/quarto-html/popper.min.js"></script>
<script src="google-forms-automation-clinic-blueprint_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="google-forms-automation-clinic-blueprint_files/libs/quarto-html/anchor.min.js"></script>
<link href="google-forms-automation-clinic-blueprint_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="google-forms-automation-clinic-blueprint_files/libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="google-forms-automation-clinic-blueprint_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="google-forms-automation-clinic-blueprint_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="google-forms-automation-clinic-blueprint_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Google Forms Blueprint: Public Health Automation Clinic Intake Form</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="public-health-automation-clinic-intake-form" class="level1">
<h1>Public Health Automation Clinic Intake Form</h1>
<p>Use this document as a blueprint to create the Google Form. Each section below maps to a form section with the specified question types.</p>
<hr>
<section id="form-settings" class="level2">
<h2 class="anchored" data-anchor-id="form-settings">Form Settings</h2>
<ul>
<li><strong>Title</strong>: Public Health Automation Clinic Intake Form</li>
<li><strong>Description</strong>:</li>
</ul>
<blockquote class="blockquote">
<p>Do you spend hours on repetitive, manual tasks that a script could handle in seconds? The Public Health Automation Clinic is a free service from Intersect Collaborations. Describe your problem, and we will develop a solution using free, open source tools.</p>
<p>Submissions are anonymous by default. All fields marked with * are required.</p>
<p><strong>Need urgent help?</strong> Contact Intersect Collaborations directly for paid consulting: https://www.intersectcollaborations.com/</p>
</blockquote>
<ul>
<li><strong>Collect email addresses</strong>: No (anonymous by default)</li>
<li><strong>Limit to 1 response</strong>: No</li>
<li><strong>Allow response editing</strong>: Yes</li>
<li><strong>Confirmation message</strong>: “Thank you for your submission! Your problem has been received and will be reviewed as time and capacity allow. If you provided contact information, you may hear from us with follow-up questions. All solutions developed through the free service are anonymized, generalized, and published publicly so others facing similar challenges can benefit.”</li>
</ul>
<hr>
</section>
<section id="section-1-about-you-optional" class="level2">
<h2 class="anchored" data-anchor-id="section-1-about-you-optional">Section 1: About You (Optional)</h2>
<p><strong>Section Header</strong>: Contact Information (Optional) <strong>Section Description</strong>: You may submit anonymously. Provide contact information only if you would like follow-up on your specific problem.</p>
<section id="q1-name" class="level3">
<h3 class="anchored" data-anchor-id="q1-name">Q1: Name</h3>
<ul>
<li><strong>Type</strong>: Short text</li>
<li><strong>Required</strong>: No</li>
<li><strong>Placeholder</strong>: “Your name (optional)”</li>
</ul>
</section>
<section id="q2-email-address" class="level3">
<h3 class="anchored" data-anchor-id="q2-email-address">Q2: Email Address</h3>
<ul>
<li><strong>Type</strong>: Short text (email validation)</li>
<li><strong>Required</strong>: No</li>
<li><strong>Placeholder</strong>: “your.email@example.com”</li>
</ul>
</section>
<section id="q3-organization-agency" class="level3">
<h3 class="anchored" data-anchor-id="q3-organization-agency">Q3: Organization / Agency</h3>
<ul>
<li><strong>Type</strong>: Short text</li>
<li><strong>Required</strong>: No</li>
<li><strong>Placeholder</strong>: “e.g., State Department of Health, County Health District”</li>
</ul>
</section>
<section id="q4-role-job-title" class="level3">
<h3 class="anchored" data-anchor-id="q4-role-job-title">Q4: Role / Job Title</h3>
<ul>
<li><strong>Type</strong>: Short text</li>
<li><strong>Required</strong>: No</li>
<li><strong>Placeholder</strong>: “e.g., Epidemiologist, Cancer Registrar, Data Analyst, Program Manager”</li>
</ul>
<hr>
</section>
</section>
<section id="section-2-the-problem" class="level2">
<h2 class="anchored" data-anchor-id="section-2-the-problem">Section 2: The Problem</h2>
<p><strong>Section Header</strong>: Describe Your Problem <strong>Section Description</strong>: Tell us about the repetitive, tedious, or error-prone task you want to automate or streamline. The more detail you provide, the better we can help.</p>
<section id="q5-problem-title" class="level3">
<h3 class="anchored" data-anchor-id="q5-problem-title">Q5: Problem Title *</h3>
<ul>
<li><strong>Type</strong>: Short text</li>
<li><strong>Required</strong>: Yes</li>
<li><strong>Placeholder</strong>: “Give your problem a brief title (e.g., ‘Monthly lab report data extraction’)”</li>
</ul>
</section>
<section id="q6-problem-description" class="level3">
<h3 class="anchored" data-anchor-id="q6-problem-description">Q6: Problem Description *</h3>
<ul>
<li><strong>Type</strong>: Long text (paragraph)</li>
<li><strong>Required</strong>: Yes</li>
<li><strong>Help text</strong>: “Describe the task in detail. What are you doing? What makes it tedious or error-prone? What would the ideal outcome look like?”</li>
<li><strong>Placeholder</strong>: “e.g., Every month I receive ~200 PDF lab reports and manually type patient demographics into a spreadsheet. It takes about 8 hours and I frequently make typos…”</li>
</ul>
</section>
<section id="q7-problem-category" class="level3">
<h3 class="anchored" data-anchor-id="q7-problem-category">Q7: Problem Category *</h3>
<ul>
<li><strong>Type</strong>: Checkboxes (select all that apply)</li>
<li><strong>Required</strong>: Yes</li>
<li><strong>Options</strong>:
<ul>
<li>Data entry / data extraction</li>
<li>Data cleaning / transformation</li>
<li>Data analysis / statistical reporting</li>
<li>File management (renaming, converting, organizing)</li>
<li>Report generation</li>
<li>Data quality checks / validation</li>
<li>Geocoding / mapping</li>
<li>Data merging / linking across sources</li>
<li>Workflow coordination / project management</li>
<li>Other (please specify in the description above)</li>
</ul></li>
</ul>
</section>
<section id="q8-current-workflow-steps" class="level3">
<h3 class="anchored" data-anchor-id="q8-current-workflow-steps">Q8: Current Workflow Steps *</h3>
<ul>
<li><strong>Type</strong>: Long text (paragraph)</li>
<li><strong>Required</strong>: Yes</li>
<li><strong>Help text</strong>: “Walk us through the steps you currently follow. Number each step if possible.”</li>
<li><strong>Placeholder</strong>: “1. Download PDF reports from the portal. Open each PDF and locate patient name, DOB, diagnosis…. Type each field into Excel spreadsheet…. Repeat for each report…”</li>
</ul>
<hr>
</section>
</section>
<section id="section-3-volume-and-frequency" class="level2">
<h2 class="anchored" data-anchor-id="section-3-volume-and-frequency">Section 3: Volume and Frequency</h2>
<p><strong>Section Header</strong>: How Big Is This Problem? <strong>Section Description</strong>: Understanding the scale helps us prioritize and design an appropriate solution.</p>
<section id="q9-how-often-do-you-perform-this-task" class="level3">
<h3 class="anchored" data-anchor-id="q9-how-often-do-you-perform-this-task">Q9: How often do you perform this task? *</h3>
<ul>
<li><strong>Type</strong>: Multiple choice</li>
<li><strong>Required</strong>: Yes</li>
<li><strong>Options</strong>:
<ul>
<li>Daily</li>
<li>Multiple times per week</li>
<li>Weekly</li>
<li>Biweekly</li>
<li>Monthly</li>
<li>Quarterly</li>
<li>Annually</li>
<li>Ad hoc / as needed</li>
</ul></li>
</ul>
</section>
<section id="q10-approximately-how-long-does-this-task-take-each-time" class="level3">
<h3 class="anchored" data-anchor-id="q10-approximately-how-long-does-this-task-take-each-time">Q10: Approximately how long does this task take each time?</h3>
<ul>
<li><strong>Type</strong>: Multiple choice</li>
<li><strong>Required</strong>: No</li>
<li><strong>Options</strong>:
<ul>
<li>Less than 30 minutes</li>
<li>30 minutes to 1 hour</li>
<li>1 to 3 hours</li>
<li>3 to 8 hours (half to full day)</li>
<li>More than one full day</li>
<li>Multiple days</li>
</ul></li>
</ul>
</section>
<section id="q11-approximately-how-many-records-files-or-items-are-involved-per-cycle" class="level3">
<h3 class="anchored" data-anchor-id="q11-approximately-how-many-records-files-or-items-are-involved-per-cycle">Q11: Approximately how many records, files, or items are involved per cycle?</h3>
<ul>
<li><strong>Type</strong>: Short text</li>
<li><strong>Required</strong>: No</li>
<li><strong>Placeholder</strong>: “e.g., 200 PDF files, 5,000 rows, 15 spreadsheets”</li>
</ul>
<hr>
</section>
</section>
<section id="section-4-your-technical-environment" class="level2">
<h2 class="anchored" data-anchor-id="section-4-your-technical-environment">Section 4: Your Technical Environment</h2>
<p><strong>Section Header</strong>: Tools and Technical Environment <strong>Section Description</strong>: Knowing what tools you have access to helps us design a solution you can actually use.</p>
<section id="q12-what-software-do-you-currently-use-for-this-task" class="level3">
<h3 class="anchored" data-anchor-id="q12-what-software-do-you-currently-use-for-this-task">Q12: What software do you currently use for this task? *</h3>
<ul>
<li><strong>Type</strong>: Checkboxes (select all that apply)</li>
<li><strong>Required</strong>: Yes</li>
<li><strong>Options</strong>:
<ul>
<li>Microsoft Excel</li>
<li>Microsoft Access</li>
<li>Microsoft Word</li>
<li>Google Sheets</li>
<li>Google Docs</li>
<li>SAS</li>
<li>R / RStudio</li>
<li>Python</li>
<li>Epi Info</li>
<li>REDCap</li>
<li>SPSS</li>
<li>Stata</li>
<li>ArcGIS / QGIS</li>
<li>Power BI / Tableau</li>
<li>Other (please specify)</li>
</ul></li>
</ul>
</section>
<section id="q13-what-additional-software-do-you-have-access-to-even-if-not-currently-using-for-this-task" class="level3">
<h3 class="anchored" data-anchor-id="q13-what-additional-software-do-you-have-access-to-even-if-not-currently-using-for-this-task">Q13: What additional software do you have access to (even if not currently using for this task)?</h3>
<ul>
<li><strong>Type</strong>: Checkboxes (select all that apply)</li>
<li><strong>Required</strong>: No</li>
<li><strong>Options</strong>:
<ul>
<li>R / RStudio</li>
<li>Python (Anaconda, standalone, etc.)</li>
<li>Microsoft Power Automate</li>
<li>Microsoft Power Query (in Excel)</li>
<li>Google Apps Script</li>
<li>Command line / terminal access</li>
<li>SQL / database access</li>
<li>None of the above / Not sure</li>
</ul></li>
</ul>
</section>
<section id="q13b-does-your-agency-permit-use-of-aillm-tools" class="level3">
<h3 class="anchored" data-anchor-id="q13b-does-your-agency-permit-use-of-aillm-tools">Q13b: Does your agency permit use of AI/LLM tools?</h3>
<ul>
<li><strong>Type</strong>: Multiple choice</li>
<li><strong>Required</strong>: No</li>
<li><strong>Help text</strong>: “Some solutions may include a reusable AI prompt (e.g., for document summarization or data interpretation). Let us know if that is an option for you.”</li>
<li><strong>Options</strong>:
<ul>
<li>Yes, we have approved AI tools (e.g., ChatGPT, Copilot, Claude, Gemini)</li>
<li>Yes, but only specific approved tools (please specify in ‘Anything else’ at the end)</li>
<li>No, AI tools are not permitted at my agency</li>
<li>I am not sure</li>
<li>Not applicable</li>
</ul></li>
</ul>
</section>
<section id="q14-can-you-install-new-software-on-your-computer" class="level3">
<h3 class="anchored" data-anchor-id="q14-can-you-install-new-software-on-your-computer">Q14: Can you install new software on your computer? *</h3>
<ul>
<li><strong>Type</strong>: Multiple choice</li>
<li><strong>Required</strong>: Yes</li>
<li><strong>Options</strong>:
<ul>
<li>Yes, I have full administrative access</li>
<li>Yes, but I need to request IT approval (and it is usually granted)</li>
<li>No, but my IT department can install software if I request it</li>
<li>No, my organization strictly limits software installation</li>
<li>I am not sure</li>
</ul></li>
</ul>
</section>
<section id="q15-what-operating-system-do-you-use" class="level3">
<h3 class="anchored" data-anchor-id="q15-what-operating-system-do-you-use">Q15: What operating system do you use?</h3>
<ul>
<li><strong>Type</strong>: Multiple choice</li>
<li><strong>Required</strong>: No</li>
<li><strong>Options</strong>:
<ul>
<li>Windows</li>
<li>macOS</li>
<li>Linux</li>
<li>Chromebook / Chrome OS</li>
<li>I am not sure</li>
</ul></li>
</ul>
<hr>
</section>
</section>
<section id="section-5-sample-data-and-permissions" class="level2">
<h2 class="anchored" data-anchor-id="section-5-sample-data-and-permissions">Section 5: Sample Data and Permissions</h2>
<p><strong>Section Header</strong>: Sample Data <strong>Section Description</strong>: A de-identified example of your input and expected output dramatically speeds up solution development. Do NOT send real patient data or personally identifiable information (PII).</p>
<section id="q16-can-you-provide-a-de-identified-sample-of-the-input-data" class="level3">
<h3 class="anchored" data-anchor-id="q16-can-you-provide-a-de-identified-sample-of-the-input-data">Q16: Can you provide a de-identified sample of the input data?</h3>
<ul>
<li><strong>Type</strong>: Multiple choice</li>
<li><strong>Required</strong>: No</li>
<li><strong>Options</strong>:
<ul>
<li>Yes, I will upload a sample with this form</li>
<li>Yes, but I would need to create a mock/de-identified version first</li>
<li>No, the data is too sensitive even in de-identified form</li>
<li>Not applicable</li>
</ul></li>
</ul>
</section>
<section id="q17-upload-a-sample-file-de-identified-only" class="level3">
<h3 class="anchored" data-anchor-id="q17-upload-a-sample-file-de-identified-only">Q17: Upload a sample file (de-identified only)</h3>
<ul>
<li><strong>Type</strong>: File upload</li>
<li><strong>Required</strong>: No</li>
<li><strong>Help text</strong>: “Upload a small, de-identified example of the data you work with. Remove ALL real names, dates of birth, SSNs, medical record numbers, and other PII. Accepted formats: CSV, XLSX, PDF, TXT, PNG (screenshot).”</li>
<li><strong>Allowed file types</strong>: CSV, XLSX, XLS, PDF, TXT, PNG, JPG, DOCX</li>
<li><strong>Max file size</strong>: 10 MB</li>
</ul>
</section>
<section id="q18-can-you-describe-what-the-output-should-look-like" class="level3">
<h3 class="anchored" data-anchor-id="q18-can-you-describe-what-the-output-should-look-like">Q18: Can you describe what the output should look like?</h3>
<ul>
<li><strong>Type</strong>: Long text (paragraph)</li>
<li><strong>Required</strong>: No</li>
<li><strong>Help text</strong>: “Describe the expected result. If possible, also upload an example of the desired output using the file upload above.”</li>
<li><strong>Placeholder</strong>: “e.g., A clean Excel spreadsheet with columns: PatientID, Facility, DiagnosisDate, CancerSite, Stage…”</li>
</ul>
<hr>
</section>
</section>
<section id="section-6-follow-up" class="level2">
<h2 class="anchored" data-anchor-id="section-6-follow-up">Section 6: Follow-Up</h2>
<p><strong>Section Header</strong>: Follow-Up <strong>Section Description</strong>: All solutions from the free service are anonymized, generalized, and published publicly. No identifying details about you or your organization are included. If you need a private solution, contact Intersect Collaborations for paid consulting.</p>
<section id="q19-would-you-be-willing-to-test-a-proposed-solution-and-provide-feedback" class="level3">
<h3 class="anchored" data-anchor-id="q19-would-you-be-willing-to-test-a-proposed-solution-and-provide-feedback">Q19: Would you be willing to test a proposed solution and provide feedback?</h3>
<ul>
<li><strong>Type</strong>: Multiple choice</li>
<li><strong>Required</strong>: No</li>
<li><strong>Options</strong>:
<ul>
<li>Yes (requires providing contact info above)</li>
<li>No, just publish the solution when it is ready</li>
<li>I submitted anonymously</li>
</ul></li>
</ul>
</section>
<section id="q20-anything-else-we-should-know" class="level3">
<h3 class="anchored" data-anchor-id="q20-anything-else-we-should-know">Q20: Anything else we should know?</h3>
<ul>
<li><strong>Type</strong>: Long text (paragraph)</li>
<li><strong>Required</strong>: No</li>
<li><strong>Placeholder</strong>: “Any additional context, constraints, deadlines, or details that would help us understand your problem.”</li>
</ul>
<hr>
</section>
</section>
<section id="form-logic-notes" class="level2">
<h2 class="anchored" data-anchor-id="form-logic-notes">Form Logic Notes</h2>
<ul>
<li>If Q16 = “Yes, I will upload a sample with this form” → Show Q17</li>
<li>If Q16 = any other option → Hide Q17 (optional: still show but note it is optional)</li>
<li>If Q19 = “Yes” but Q2 (email) is blank → Show validation message: “Please provide your email address in Section 1 if you would like to test solutions and provide feedback.”</li>
</ul>
<hr>
</section>
<section id="google-forms-creation-checklist" class="level2">
<h2 class="anchored" data-anchor-id="google-forms-creation-checklist">Google Forms Creation Checklist</h2>
<ul class="task-list">
<li><label><input type="checkbox">Create form at https://forms.google.com</label></li>
<li><label><input type="checkbox">Set title and description text from above</label></li>
<li><label><input type="checkbox">Create all 6 sections with headers and descriptions</label></li>
<li><label><input type="checkbox">Add all questions with correct types and options (including Q13b for AI/LLM)</label></li>
<li><label><input type="checkbox">Mark required fields (Q5, Q6, Q7, Q8, Q9, Q12, Q14)</label></li>
<li><label><input type="checkbox">Enable file upload for Q17 (requires respondents to sign in to Google; consider noting this)</label></li>
<li><label><input type="checkbox">Configure confirmation message</label></li>
<li><label><input type="checkbox">Set response destination (Google Sheets for tracking)</label></li>
<li><label><input type="checkbox">Test form end-to-end</label></li>
<li><label><input type="checkbox">Copy shareable link and update chapter 13 placeholder URL</label></li>
<li><label><input type="checkbox">Update LinkedIn post with form link</label></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>